(this["webpackJsonpreact-way-of-the-samurai"]=this["webpackJsonpreact-way-of-the-samurai"]||[]).push([[3],{298:function(t,e,s){t.exports={pirate_island:"ProfileInfo_pirate_island__1-UnM",descriptionBlock:"ProfileInfo_descriptionBlock__3cd8Y",userAvatar:"ProfileInfo_userAvatar__qlIFO",contact:"ProfileInfo_contact__1N3gp",formError:"ProfileInfo_formError__39A1s"}},299:function(t,e,s){},300:function(t,e,s){t.exports={postsBlock:"MyPosts_postsBlock__2ifKf",posts:"MyPosts_posts__3tZ1c"}},301:function(t,e,s){t.exports={item:"Post_item__ihtu9"}},306:function(t,e,s){"use strict";s.r(e);var c=s(37),i=s(38),r=s(40),o=s(39),n=s(0),a=s.n(n),j=(s(299),s(96)),l=s(298),u=s.n(l),b=(s.p,s(68)),d=s(98),f=s(1),O=function(t){var e=Object(n.useState)(!1),s=Object(j.a)(e,2),c=s[0],i=s[1],r=Object(n.useState)(t.status),o=Object(j.a)(r,2),a=o[0],l=o[1];Object(n.useEffect)((function(){l(t.status)}),[t.status]);return Object(f.jsx)("div",{children:c?Object(f.jsxs)("div",{children:[Object(f.jsx)("b",{children:"Status:"})," ",Object(f.jsx)("input",{onChange:function(t){l(t.currentTarget.value)},autoFocus:!0,onBlur:function(){i(!1),t.updateUserStatus(a)},value:a})]}):Object(f.jsxs)("div",{onDoubleClick:function(){i(!0)},children:[Object(f.jsx)("b",{children:"Status:"})," ",Object(f.jsx)("span",{children:t.status||"No status"})]})})},h=s(26),p=s(128),x=Object(p.a)({form:"edit-profile"})((function(t){var e=t.handleSubmit,s=t.profile,c=t.error;return Object(f.jsxs)("form",{onSubmit:e,children:[Object(f.jsx)("div",{children:Object(f.jsx)("button",{children:"Save"})}),c&&Object(f.jsx)("div",{className:u.a.formError,children:c}),Object(f.jsxs)("div",{children:[Object(f.jsx)("b",{children:"Name:"})," ",Object(h.c)("Name","fullName",[],h.a)]}),Object(f.jsxs)("div",{children:[Object(f.jsx)("b",{children:"Looking for a job:"})," ",Object(h.c)("","lookingForAJob",[],h.a,{type:"checkbox"})]}),Object(f.jsxs)("div",{children:[Object(f.jsx)("b",{children:"My skills:"})," ",Object(h.c)("My skills","lookingForAJobDescription",[],h.b)]}),Object(f.jsxs)("div",{children:[Object(f.jsx)("b",{children:"About me:"})," ",Object(h.c)("About me","aboutMe",[],h.b)]}),Object(f.jsxs)("div",{children:[Object(f.jsx)("b",{children:"Contacts:"})," ",Object.keys(s.contacts).map((function(t){return Object(f.jsxs)("div",{className:u.a.contact,children:[Object(f.jsxs)("b",{children:[t,":"]})," ",Object(h.c)(t,"contacts."+t,[],h.a)]},t)}))]})]})})),v=function(t){var e=t.profile,s=t.isOwner,c=t.activateEditMode;return Object(f.jsxs)("div",{children:[Object(f.jsx)("div",{children:s&&Object(f.jsx)("button",{onClick:c,children:"Edit"})}),Object(f.jsxs)("div",{children:[Object(f.jsx)("b",{children:"Name:"})," ",e.fullName]}),Object(f.jsxs)("div",{children:[Object(f.jsx)("b",{children:"Looking for a job:"})," ",e.lookingForAJob?"yes":"no"]}),e.lookingForAJob&&Object(f.jsxs)("div",{children:[Object(f.jsx)("b",{children:"My skills:"})," ",e.lookingForAJobDescription]}),Object(f.jsxs)("div",{children:[Object(f.jsx)("b",{children:"About me:"})," ",e.aboutMe]}),Object(f.jsxs)("div",{children:[Object(f.jsx)("b",{children:"Contacts:"})," ",Object.keys(e.contacts).map((function(t){return Object(f.jsx)(m,{contactTitle:t,contactValue:e.contacts[t]},t)}))]})]})},m=function(t){var e=t.contactTitle,s=t.contactValue;return Object(f.jsxs)("div",{className:u.a.contact,children:[Object(f.jsxs)("b",{children:[e,": "]}),s]})},k=function(t){var e=t.profile,s=t.status,c=t.updateUserStatus,i=t.isOwner,r=t.savePhoto,o=t.saveProfile,a=Object(n.useState)(!1),l=Object(j.a)(a,2),h=l[0],p=l[1];if(!e)return Object(f.jsx)(b.a,{});return Object(f.jsx)("div",{children:Object(f.jsxs)("div",{className:u.a.descriptionBlock,children:[Object(f.jsx)("img",{src:e.photos.large||d.a,className:u.a.userAvatar,alt:"Avatar"}),i&&Object(f.jsx)("div",{children:Object(f.jsx)("input",{type:"file",onChange:function(t){t.target.files.length&&r(t.target.files[0])}})}),h?Object(f.jsx)(x,{initialValues:e,profile:e,onSubmit:function(t){o(t).then((function(){p(!1)}))}}):Object(f.jsx)(v,{activateEditMode:function(){p(!0)},profile:e,isOwner:i}),Object(f.jsx)(O,{status:s,updateUserStatus:c})]})})},P=s(95),g=s(35),_=s(300),S=s.n(_),y=s(301),N=s.n(y),w=s.p+"static/media/ava_cartman.17cfc4ad.jpg",A=function(t){var e=t.message,s=t.likesCount;t.id;return Object(f.jsxs)("div",{className:N.a.item,children:[Object(f.jsx)("img",{alt:"Avatar",src:w}),e,Object(f.jsx)("div",{children:Object(f.jsxs)("span",{children:["Likes: ",s]})})]})},U=s(90),I=s(66),M=Object(I.a)(10),C=Object(p.a)({form:"profileAddNewPostForm"})((function(t){return Object(f.jsxs)("form",{onSubmit:t.handleSubmit,children:[Object(f.jsx)("div",{children:Object(f.jsx)(U.a,{placeholder:"New post text",component:h.b,name:"newPostText",validate:[I.b,M]})}),Object(f.jsx)("div",{children:Object(f.jsx)("button",{children:"Add post"})})]})})),F=function(t){var e=Object(g.a)(t.posts).reverse().map((function(t){return Object(f.jsx)(A,{message:t.message,likesCount:t.likesCount,id:t.id},t.id)}));return Object(f.jsxs)("div",{className:S.a.postsBlock,children:[Object(f.jsx)("h3",{children:"My posts"}),Object(f.jsx)(C,{onSubmit:function(e){t.addNewPost(e.newPostText)}}),Object(f.jsx)("div",{className:S.a.posts,children:e})]})},B=s(20),E=Object(B.b)((function(t){return{posts:t.profileState.posts}}),{addNewPost:P.a})(F),J=function(t){var e=t.profile,s=t.status,c=t.updateUserStatus,i=t.isOwner,r=t.savePhoto,o=t.saveProfile;return Object(f.jsxs)("div",{children:[Object(f.jsx)(k,{savePhoto:r,isOwner:i,profile:e,status:s,updateUserStatus:c,saveProfile:o}),Object(f.jsx)(E,{})]})},D=s(11),T=s(10),L=function(t){Object(r.a)(s,t);var e=Object(o.a)(s);function s(){return Object(c.a)(this,s),e.apply(this,arguments)}return Object(i.a)(s,[{key:"refreshProfile",value:function(){var t=this.props,e=t.getUserProfile,s=t.getUserStatus,c=t.authorizedUserId,i=this.props.match.params.userId;i||(i=c)||this.props.history.push("/login"),e(i),s(i)}},{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(t,e,s){this.props.match.params.userId!==t.match.params.userId&&this.refreshProfile()}},{key:"render",value:function(){var t=this.props,e=t.profile,s=t.status,c=t.updateUserStatus,i=t.savePhoto,r=t.saveProfile;return Object(f.jsx)(J,{isOwner:!this.props.match.params.userId,savePhoto:i,profile:e,status:s,updateUserStatus:c,saveProfile:r})}}]),s}(a.a.Component);e.default=Object(T.compose)(Object(B.b)((function(t){return{profile:t.profileState.profile,status:t.profileState.status,authorizedUserId:t.authState.id}}),{getUserProfile:P.c,getUserStatus:P.d,updateUserStatus:P.g,savePhoto:P.e,saveProfile:P.f}),D.g)(L)}}]);
//# sourceMappingURL=3.ad8504f1.chunk.js.map